<section class="pb-80">
    <div class="container">
        <div class="card subscription-card p-5 pb-4">
            <div class="text-center pb-20">
                <div class="container">
                    <div class="row">
                        <h3 class="th-subtitle" style="line-height: 1;">
                            {{ tittle | translate }}
                        </h3>
                    </div>
                </div>
            </div>
            <table class="table align-middle table-responsive table-hover">
                <thead>
                    <tr class="table-dark">
                        <th scope="col">{{'checkout.products' | translate}}</th>
                        <th scope="col"></th>
                        <th scope="col" class="text-end">Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of items">
                        <td>
                            <div class="row">
                                <h5 class="m-0">
                                    <a class="roboto-regular" style="font-size: medium;" [routerLink]="['/shop/shop-details', item.id]">{{ item.name }}</a> 
                                </h5>
                            </div>
                            <div class="row">
                                <p>
                                    {{item.variant}}
                                    <ng-container *ngIf="item.storage">
                                    {{item.storage}}
                                    <br>
                                    </ng-container>
                                </p>
                            </div>
                        </td>
                        <td>
                            <span class="roboto-regular text-center" style="font-size: medium;"> x{{item.orderQuantity}} </span>
                        </td>
                        <td class="text-end">
                            <ng-container *ngIf="item.offer">
                                <span style="text-decoration: line-through;">${{(item.price * item.orderQuantity).toFixed(2)}}</span>
                                <strong>
                                    <span class="ms-2">${{((item.price - (item.price * (item?.offer?.discount ?? 0)) / 100) * item.orderQuantity).toFixed(2)}}</span>
                                </strong> 
                            </ng-container>
                
                            <ng-container *ngIf="!item.offer;">
                                <strong>
                                    ${{ (item.price * item.orderQuantity).toFixed(2) }}
                                </strong>
                            </ng-container>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td style="border: none;"><strong>Subtotal:</strong></td>
                        <td style="border: none;"></td>
                        <td style="border: none;" class="text-end">
                            <strong>
                                ${{ subtotal.toFixed(2) }}
                            </strong>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>{{'checkout.shipping' | translate}}:</strong></td>
                        <td></td>
                        <td class="text-end">
                            <strong>
                                ${{shipping.toFixed(2)}}
                            </strong>
                        </td>
                    </tr>
                    <tr>
                        <td style="border: none;">
                            <strong>Total:</strong>
                        </td>
                        <td style="border: none;"></td>
                        <td style="border: none;" class="text-end">
                            <strong>
                                ${{(subtotal + shipping).toFixed(2)}}
                            </strong>
                        </td>
                    </tr>
                </tfoot>
            </table>
            <button type="button" (click)="checkout.validateOrderForm()" class="btn btn-primary">
                {{'checkout.placeOrder' | translate}}
            </button>
        </div>
    </div>
</section>